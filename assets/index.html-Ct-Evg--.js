import{_ as a,c as t,a as s,o as n}from"./app-DUomSOUZ.js";const i={};function l(r,e){return n(),t("div",null,e[0]||(e[0]=[s(`<h2 id="规则清单" tabindex="-1"><a class="header-anchor" href="#规则清单"><span>规则清单</span></a></h2><h3 id="查询" tabindex="-1"><a class="header-anchor" href="#查询"><span>查询</span></a></h3><div class="language-sql line-numbers-mode" data-ext="sql" data-title="sql"><button class="copy" title="复制代码" data-copied="已复制"></button><pre class="shiki shiki-themes vitesse-light vitesse-dark vp-code"><code><span class="line"><span>use qms_qit;</span></span>
<span class="line"><span>select b.*</span></span>
<span class="line"><span>from billruleregister b</span></span>
<span class="line"><span>where 1=1</span></span>
<span class="line"><span>and b.ytenant_id = &#39;0&#39;</span></span>
<span class="line"><span>and b.\`action\` = &#39;audit&#39;</span></span>
<span class="line"><span>and b.billnum in (</span></span>
<span class="line"><span>&#39;qms_incominspectorder_card&#39;,</span></span>
<span class="line"><span>&#39;qms_prodinspectorder_card&#39;,</span></span>
<span class="line"><span>&#39;qms_stockinspectorder_card&#39;,</span></span>
<span class="line"><span>&#39;qms_otherinspectorder_card&#39;,</span></span>
<span class="line"><span>&#39;qms_procedureinspectorder_card&#39;,</span></span>
<span class="line"><span>&#39;qms_deliveryinspectorder_card&#39;</span></span>
<span class="line"><span>)</span></span>
<span class="line"><span>and b.\`domain\` is not null</span></span>
<span class="line"><span>order by b.iorder;</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="说明" tabindex="-1"><a class="header-anchor" href="#说明"><span>说明</span></a></h3><table><thead><tr><th style="text-align:center;">billnum</th><th style="text-align:center;">billnum desc</th><th style="text-align:center;">ruleId</th><th style="text-align:center;">ruleId desc</th><th style="text-align:center;">config</th></tr></thead><tbody><tr><td style="text-align:center;">qms_incominspectorder_card</td><td style="text-align:center;">来料检验单</td><td style="text-align:center;">afterArrivalWriteBackRule</td><td style="text-align:center;">回写采购到货</td><td style="text-align:center;">qms2pu</td></tr><tr><td style="text-align:center;">qms_incominspectorder_card</td><td style="text-align:center;">来料检验单</td><td style="text-align:center;">arriveOrderInspectionRule</td><td style="text-align:center;">回写委外到货</td><td style="text-align:center;">qms2osmarriveorder</td></tr><tr><td style="text-align:center;">qms_incominspectorder_card</td><td style="text-align:center;">来料检验单</td><td style="text-align:center;">afterInspectOrderAuditOrUnaudit4STRule</td><td style="text-align:center;">回写采购入库</td><td style="text-align:center;">stockInfo</td></tr><tr><td style="text-align:center;">qms_prodinspectorder_card</td><td style="text-align:center;">产品检验单</td><td style="text-align:center;">finishedReportInspectionRule</td><td style="text-align:center;">回写完工报告</td><td style="text-align:center;">qms2report</td></tr><tr><td style="text-align:center;">qms_prodinspectorder_card</td><td style="text-align:center;">产品检验单</td><td style="text-align:center;">afterInspectOrderAuditOrUnaudit4STRule</td><td style="text-align:center;">回写完工入库</td><td style="text-align:center;">stockInfo</td></tr><tr><td style="text-align:center;">qms_procedureinspectorder_card</td><td style="text-align:center;">工序检验单</td><td style="text-align:center;">backWriteTaskReportRule</td><td style="text-align:center;">回写工序任务汇报</td><td style="text-align:center;">qualityInspectionBackSourceMap</td></tr><tr><td style="text-align:center;">qms_deliveryinspectorder_card</td><td style="text-align:center;">发退货检验单</td><td style="text-align:center;">backWriteDeliveryVoucherRule</td><td style="text-align:center;">回写销售发货</td><td style="text-align:center;">qms2udinghuo</td></tr></tbody></table><h2 id="规则调用" tabindex="-1"><a class="header-anchor" href="#规则调用"><span>规则调用</span></a></h2><h3 id="调用质检结果rpc接口" tabindex="-1"><a class="header-anchor" href="#调用质检结果rpc接口"><span>调用质检结果RPC接口</span></a></h3><div class="language-java line-numbers-mode" data-ext="java" data-title="java"><button class="copy" title="复制代码" data-copied="已复制"></button><pre class="shiki shiki-themes vitesse-light vitesse-dark vp-code"><code><span class="line"><span></span></span>
<span class="line"><span>@Resource</span></span>
<span class="line"><span>private IQmsDfmService4Qit qmsdfmservice;</span></span>
<span class="line"><span></span></span>
<span class="line"><span>QMSDFMRespDto resultDto = qmsdfmservice.insertInspectInfo(billInfoList);</span></span>
<span class="line"><span>HashMap&lt;String, Object&gt; inspectResultMap = (HashMap&lt;String, Object&gt;) resultDto.getData();</span></span>
<span class="line"><span>List&lt;HashMap&lt;String, Object&gt;&gt; inspectResultMaps = (List&lt;HashMap&lt;String, Object&gt;&gt;) inspectResultMap.get(&quot;inspectResultDetailData&quot;);</span></span>
<span class="line"><span>List&lt;HashMap&lt;String, Object&gt;&gt; backWriteData = (List&lt;HashMap&lt;String, Object&gt;&gt;) inspectResultMap.get(&quot;backWriteData4QIT&quot;);</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="调用afterarrivalwritebackrule" tabindex="-1"><a class="header-anchor" href="#调用afterarrivalwritebackrule"><span>调用afterArrivalWriteBackRule</span></a></h3><div class="language-java line-numbers-mode" data-ext="java" data-title="java"><button class="copy" title="复制代码" data-copied="已复制"></button><pre class="shiki shiki-themes vitesse-light vitesse-dark vp-code"><code><span class="line"><span>// 回写到货单信息</span></span>
<span class="line"><span>Map&lt;String, Object&gt; map = new HashMap&lt;&gt;();</span></span>
<span class="line"><span>map.put(&quot;action&quot;, &quot;audit&quot;); // audit - 审批 unaudit - 弃审</span></span>
<span class="line"><span>map.put(&quot;servicecode&quot;, &quot;qms_qit_incominspectorder&quot;); // 来料检验单服务编码</span></span>
<span class="line"><span>map.put(&quot;data&quot;, inspectResultList);</span></span>
<span class="line"><span>map.put(&quot;queryDfmWritebackamount&quot;, backWriteData);</span></span>
<span class="line"><span>paramMap.put(&quot;qms2pu&quot;, map);</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="调用arriveorderinspectionrule" tabindex="-1"><a class="header-anchor" href="#调用arriveorderinspectionrule"><span>调用arriveOrderInspectionRule</span></a></h3><div class="language-java line-numbers-mode" data-ext="java" data-title="java"><button class="copy" title="复制代码" data-copied="已复制"></button><pre class="shiki shiki-themes vitesse-light vitesse-dark vp-code"><code><span class="line"><span>// 回写到委外货单信息</span></span>
<span class="line"><span>Map&lt;String, Object&gt; map = new HashMap&lt;&gt;();</span></span>
<span class="line"><span>map.put(&quot;action&quot;, &quot;audit&quot;); // audit - 审批 unaudit - 弃审</span></span>
<span class="line"><span>map.put(&quot;servicecode&quot;, &quot;qms_qit_incominspectorder&quot;); // 来料检验单服务编码</span></span>
<span class="line"><span>map.put(&quot;data&quot;, inspectResultList);</span></span>
<span class="line"><span>map.put(&quot;queryDfmWritebackamount&quot;, backWriteData);</span></span>
<span class="line"><span>paramMap.put(&quot;qms2osmarriveorder&quot;, map);</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="调用afterinspectorderauditorunaudit4strule" tabindex="-1"><a class="header-anchor" href="#调用afterinspectorderauditorunaudit4strule"><span>调用afterInspectOrderAuditOrUnaudit4STRule</span></a></h3><div class="language-java line-numbers-mode" data-ext="java" data-title="java"><button class="copy" title="复制代码" data-copied="已复制"></button><pre class="shiki shiki-themes vitesse-light vitesse-dark vp-code"><code><span class="line"><span>Map&lt;String, Object&gt; map = new HashMap&lt;&gt;();</span></span>
<span class="line"><span>List&lt;Map&lt;String, Object&gt;&gt; backWriteDataMaps = (List&lt;Map&lt;String, Object&gt;&gt;) (List&lt;?&gt;) backWriteData;</span></span>
<span class="line"><span>List&lt;BizObject&gt; backWriteDataObjs = DataUtil.getSingleton().toBizObject(backWriteDataMaps);</span></span>
<span class="line"><span>map.put(&quot;bill&quot;, backWriteDataObjs);</span></span>
<span class="line"><span>map.put(&quot;billNo&quot;, &quot;st_purinrecord&quot;); // 采购入库</span></span>
<span class="line"><span>paramMap.put(&quot;stockInfo&quot;, map);</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="调用finishedreportinspectionrule" tabindex="-1"><a class="header-anchor" href="#调用finishedreportinspectionrule"><span>调用finishedReportInspectionRule</span></a></h3><div class="language-java line-numbers-mode" data-ext="java" data-title="java"><button class="copy" title="复制代码" data-copied="已复制"></button><pre class="shiki shiki-themes vitesse-light vitesse-dark vp-code"><code><span class="line"><span>Map&lt;String, Object&gt; map = new HashMap&lt;&gt;();</span></span>
<span class="line"><span>map.put(&quot;action&quot;, &quot;audit&quot;); // audit - 审批 unaudit - 弃审</span></span>
<span class="line"><span>map.put(&quot;servicecode&quot;, &quot;qms_qit_prodinspectorder&quot;); // 产品检验单servicecode</span></span>
<span class="line"><span>map.put(&quot;data&quot;, inspectResultList);</span></span>
<span class="line"><span>map.put(&quot;queryDfmWritebackamount&quot;, backWriteData);</span></span>
<span class="line"><span>map.put(&quot;inspectionDate&quot;, realityEndDate); // 检验结束时间</span></span>
<span class="line"><span>paramMap.put(&quot;qms2report&quot;, map);</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="调用afterinspectorderauditorunaudit4strule-1" tabindex="-1"><a class="header-anchor" href="#调用afterinspectorderauditorunaudit4strule-1"><span>调用afterInspectOrderAuditOrUnaudit4STRule</span></a></h3><div class="language-java line-numbers-mode" data-ext="java" data-title="java"><button class="copy" title="复制代码" data-copied="已复制"></button><pre class="shiki shiki-themes vitesse-light vitesse-dark vp-code"><code><span class="line"><span>Map&lt;String, Object&gt; map = new HashMap&lt;&gt;();</span></span>
<span class="line"><span>List&lt;Map&lt;String, Object&gt;&gt; backWriteDataMaps = (List&lt;Map&lt;String, Object&gt;&gt;) (List&lt;?&gt;) backWriteData;</span></span>
<span class="line"><span>List&lt;BizObject&gt; backWriteDataObjs = DataUtil.getSingleton().toBizObject(backWriteDataMaps);</span></span>
<span class="line"><span>map.put(&quot;bill&quot;, backWriteDataObjs);</span></span>
<span class="line"><span>map.put(&quot;billNo&quot;, &quot;st_storeprorecord&quot;); // 产品入库</span></span>
<span class="line"><span>paramMap.put(&quot;stockInfo&quot;, map);</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="调用backwritetaskreportrule" tabindex="-1"><a class="header-anchor" href="#调用backwritetaskreportrule"><span>调用backWriteTaskReportRule</span></a></h3><div class="language-java line-numbers-mode" data-ext="java" data-title="java"><button class="copy" title="复制代码" data-copied="已复制"></button><pre class="shiki shiki-themes vitesse-light vitesse-dark vp-code"><code><span class="line"><span>Map&lt;String, Object&gt; map = new HashMap&lt;&gt;();</span></span>
<span class="line"><span>map.put(&quot;action&quot;, action);</span></span>
<span class="line"><span>map.put(&quot;servicecode&quot;, &quot;qms_procedureinspectorder&quot;); // 工序检验单服务编码</span></span>
<span class="line"><span>map.put(&quot;data&quot;, inspectResultList);</span></span>
<span class="line"><span>map.put(&quot;queryDfmWritebackamount&quot;, backWriteData);</span></span>
<span class="line"><span>paramMap.put(&quot;qualityInspectionBackSourceMap&quot;, map);</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="调用backwritedeliveryvoucherrule" tabindex="-1"><a class="header-anchor" href="#调用backwritedeliveryvoucherrule"><span>调用backWriteDeliveryVoucherRule</span></a></h3><div class="language-java line-numbers-mode" data-ext="java" data-title="java"><button class="copy" title="复制代码" data-copied="已复制"></button><pre class="shiki shiki-themes vitesse-light vitesse-dark vp-code"><code><span class="line"><span>Map&lt;String, Object&gt; map = new HashMap&lt;&gt;();</span></span>
<span class="line"><span>map.put(&quot;action&quot;, action);</span></span>
<span class="line"><span>map.put(&quot;servicecode&quot;, &quot;qms_qit_deliveryinspectorder&quot;); // 工序检验单服务编码</span></span>
<span class="line"><span>map.put(&quot;data&quot;, inspectResultList);</span></span>
<span class="line"><span>map.put(&quot;queryDfmWritebackamount&quot;, backWriteData);</span></span>
<span class="line"><span>map.put(&quot;checkType&quot;,&quot;004&quot;);</span></span>
<span class="line"><span>paramMap.put(&quot;qms2udinghuo&quot;, map);</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div>`,22)]))}const d=a(i,[["render",l],["__file","index.html.vue"]]),c=JSON.parse('{"path":"/%E7%94%A8%E5%8F%8B/20250715-%E6%A3%80%E9%AA%8C%E5%8D%95%E5%9B%9E%E5%86%99/","title":"20250715-检验单回写","lang":"zh-CN","frontmatter":{"title":"20250715-检验单回写","createTime":"2025/07/31 16:56:44","permalink":"/用友/20250715-检验单回写/","description":"规则清单 查询 说明 规则调用 调用质检结果RPC接口 调用afterArrivalWriteBackRule 调用arriveOrderInspectionRule 调用afterInspectOrderAuditOrUnaudit4STRule 调用finishedReportInspectionRule 调用afterInspectOrderAu...","head":[["meta",{"property":"og:url","content":"https://orthogonalandparallel.github.io/%E7%94%A8%E5%8F%8B/20250715-%E6%A3%80%E9%AA%8C%E5%8D%95%E5%9B%9E%E5%86%99/"}],["meta",{"property":"og:site_name","content":"万里任禅游"}],["meta",{"property":"og:title","content":"20250715-检验单回写"}],["meta",{"property":"og:description","content":"规则清单 查询 说明 规则调用 调用质检结果RPC接口 调用afterArrivalWriteBackRule 调用arriveOrderInspectionRule 调用afterInspectOrderAuditOrUnaudit4STRule 调用finishedReportInspectionRule 调用afterInspectOrderAu..."}],["meta",{"property":"og:type","content":"article"}],["meta",{"property":"og:locale","content":"zh-CN"}],["meta",{"property":"og:updated_time","content":"2025-09-19T03:44:41.000Z"}],["meta",{"property":"article:modified_time","content":"2025-09-19T03:44:41.000Z"}],["script",{"type":"application/ld+json"},"{\\"@context\\":\\"https://schema.org\\",\\"@type\\":\\"Article\\",\\"headline\\":\\"20250715-检验单回写\\",\\"image\\":[\\"\\"],\\"dateModified\\":\\"2025-09-19T03:44:41.000Z\\",\\"author\\":[]}"]]},"headers":[],"readingTime":{"minutes":1.79,"words":538},"git":{"updatedTime":1758253481000,"contributors":[{"name":"靳琛","email":"jinchenj@yonyou.com","commits":3,"avatar":"https://avatars.githubusercontent.com/靳琛?v=4","url":"https://github.com/靳琛"}]},"autoDesc":true,"filePathRelative":"笔记/用友/BIP/制造云/质量管理/设计/20250731-检验单回写.md","categoryList":[{"id":"7051dc","sort":10000,"name":"笔记"},{"id":"01ffd5","sort":10001,"name":"用友"},{"id":"b4ff1c","sort":10002,"name":"BIP"},{"id":"86a043","sort":10006,"name":"制造云"},{"id":"a13c9f","sort":10008,"name":"质量管理"},{"id":"c01821","sort":10016,"name":"设计"}],"bulletin":false}');export{d as comp,c as data};
