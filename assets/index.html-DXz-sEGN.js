import{_ as n,c as a,a as e,o as i}from"./app-DUomSOUZ.js";const l={};function p(c,s){return i(),a("div",null,s[0]||(s[0]=[e(`<h2 id="安装" tabindex="-1"><a class="header-anchor" href="#安装"><span>安装</span></a></h2><ul><li>brew <code>brew install nginx</code></li><li>rpm <code>rpm -ivh nginx-1.10.3-1.el7.ngx.x86_64.rpm</code></li><li>yum <ul><li>依赖 <code>yum -y install gcc pcre-devel zlib-devel openssl openssl-devel</code></li><li>下载 <code>yum install -y nginx</code></li></ul></li></ul><h2 id="命令" tabindex="-1"><a class="header-anchor" href="#命令"><span>命令</span></a></h2><ul><li>启动 <code>nginx -c /etc/nginx/nginx.conf</code></li><li>关闭 <code>nginx -s stop</code></li><li>重启 <code>nginx -s reload</code></li><li>检查配置文件 <code>nginx -t</code></li></ul><h2 id="配置" tabindex="-1"><a class="header-anchor" href="#配置"><span>配置</span></a></h2><p><strong>映射</strong></p><div class="language-yaml line-numbers-mode" data-ext="yaml" data-title="yaml"><button class="copy" title="复制代码" data-copied="已复制"></button><pre class="shiki shiki-themes vitesse-light vitesse-dark vp-code"><code><span class="line"><span>host.docker.internal -- 127.0.0.1</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><div class="language-yaml line-numbers-mode" data-ext="yaml" data-title="yaml"><button class="copy" title="复制代码" data-copied="已复制"></button><pre class="shiki shiki-themes vitesse-light vitesse-dark vp-code"><code><span class="line"><span>worker_processes  1;</span></span>
<span class="line"><span></span></span>
<span class="line"><span>events {</span></span>
<span class="line"><span>    worker_connections  1024;</span></span>
<span class="line"><span>}</span></span>
<span class="line"><span></span></span>
<span class="line"><span>http {</span></span>
<span class="line"><span>    include       mime.types;</span></span>
<span class="line"><span>    default_type  application/octet-stream;</span></span>
<span class="line"><span>    sendfile        on;</span></span>
<span class="line"><span>    keepalive_timeout  65;</span></span>
<span class="line"><span>    gzip  on;   #开启gzip</span></span>
<span class="line"><span>    gzip_min_length 1k; #低于1kb的资源不压缩</span></span>
<span class="line"><span>    gzip_comp_level 3; #压缩级别【1-9】，越大压缩率越高，同时消耗cpu资源也越多，建议设置在4左右。</span></span>
<span class="line"><span>    gzip_types text/plain application/javascript application/x-javascript text/javascript text/xml text/css;  #需要压缩哪些响应类型的资源，多个空格隔开。不建议压缩图片，下面会讲为什么。</span></span>
<span class="line"><span>    gzip_disable &quot;MSIE [1-6]\\.&quot;;  #配置禁用gzip条件，支持正则。此处表示ie6及以下不启用gzip（因为ie低版本不支持）</span></span>
<span class="line"><span>    gzip_vary on;  #是否添加“Vary: Accept-Encoding”响应头</span></span>
<span class="line"><span></span></span>
<span class="line"><span>    server {</span></span>
<span class="line"><span>        listen       80 default_server;</span></span>
<span class="line"><span>        server_name  127.0.0.1;</span></span>
<span class="line"><span>        root     /home/static_blog/static_blog/;</span></span>
<span class="line"><span></span></span>
<span class="line"><span>		client_max_body_size   100M;</span></span>
<span class="line"><span>        location / {</span></span>
<span class="line"><span>           try_files $uri $uri/ /index.html;</span></span>
<span class="line"><span></span></span>
<span class="line"><span>           expires 7d;</span></span>
<span class="line"><span>           log_not_found off;</span></span>
<span class="line"><span>           access_log off;</span></span>
<span class="line"><span>		}</span></span>
<span class="line"><span>	}</span></span>
<span class="line"><span>	</span></span>
<span class="line"><span>}</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><strong>负载均衡</strong></p><ul><li>upstream权重分配 <ul><li>轮询（默认）：按时间顺序逐个安排</li><li>weight：指定轮询几率</li><li>ip_hash：一个ip访问一台固定服务器</li><li>fair：按响应时间分配</li><li>backup：其他机器都忙时，访问backup机器</li></ul></li></ul><div class="language- line-numbers-mode" data-ext="" data-title=""><button class="copy" title="复制代码" data-copied="已复制"></button><pre class="shiki shiki-themes vitesse-light vitesse-dark vp-code"><code><span class="line"><span>#使用用户</span></span>
<span class="line"><span>#user  nobody;</span></span>
<span class="line"><span>worker_processes  1;</span></span>
<span class="line"><span></span></span>
<span class="line"><span>#错误日志存放路径</span></span>
<span class="line"><span>#error_log  logs/error.log;</span></span>
<span class="line"><span>#error_log  logs/error.log  notice;</span></span>
<span class="line"><span>error_log  logs/error.log  info;</span></span>
<span class="line"><span></span></span>
<span class="line"><span></span></span>
<span class="line"><span>#指定pid存放文件</span></span>
<span class="line"><span>#pid        logs/nginx.pid;</span></span>
<span class="line"><span></span></span>
<span class="line"><span></span></span>
<span class="line"><span>events {</span></span>
<span class="line"><span>	#使用网络IO模型linux建议epoll，FreeBSD建议采用kqueue，window下不指定</span></span>
<span class="line"><span>	#use epoll</span></span>
<span class="line"><span>	</span></span>
<span class="line"><span>	#允许最大连接数</span></span>
<span class="line"><span>    worker_connections  1024;</span></span>
<span class="line"><span>}</span></span>
<span class="line"><span></span></span>
<span class="line"><span></span></span>
<span class="line"><span>http {</span></span>
<span class="line"><span>    include       mime.types;</span></span>
<span class="line"><span>    default_type  application/octet-stream;</span></span>
<span class="line"><span>	#定义日志格式</span></span>
<span class="line"><span>    log_format  main  &#39;$remote_addr - $remote_user [$time_local] &quot;$request&quot; &#39;</span></span>
<span class="line"><span>                      &#39;$status $body_bytes_sent &quot;$http_referer&quot; &#39;</span></span>
<span class="line"><span>                      &#39;&quot;$http_user_agent&quot; &quot;$http_x_forwarded_for&quot;&#39;;</span></span>
<span class="line"><span>    access_log  logs/access.log  main;</span></span>
<span class="line"><span>    sendfile        on;</span></span>
<span class="line"><span>    #tcp_nopush     on;</span></span>
<span class="line"><span>    #keepalive_timeout  0;</span></span>
<span class="line"><span>    keepalive_timeout  65;</span></span>
<span class="line"><span>    server_names_hash_bucket_size 64;</span></span>
<span class="line"><span>	client_max_body_size 10m;</span></span>
<span class="line"><span>	upstream portal_server {</span></span>
<span class="line"><span>	#	ip_hash;</span></span>
<span class="line"><span>		server 112.74.106.172:8080 weight=2 max_fails=2 fail_timeout=60s;</span></span>
<span class="line"><span>		server 120.76.130.193:8080 weight=2 max_fails=2 fail_timeout=60s;</span></span>
<span class="line"><span>    }</span></span>
<span class="line"><span>    server  {</span></span>
<span class="line"><span>        listen       80;</span></span>
<span class="line"><span>        server_name   127.0.0.1;</span></span>
<span class="line"><span>		location / { </span></span>
<span class="line"><span>			proxy_pass   http://portal_server/;</span></span>
<span class="line"><span>			proxy_set_header Host $http_host;</span></span>
<span class="line"><span>			proxy_set_header X-Real-IP $remote_addr;</span></span>
<span class="line"><span>			proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;</span></span>
<span class="line"><span>		}</span></span>
<span class="line"><span>    }</span></span>
<span class="line"><span></span></span>
<span class="line"><span>}</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="https" tabindex="-1"><a class="header-anchor" href="#https"><span>HTTPS</span></a></h3><ul><li>SSL证书上传</li><li>配置监听</li></ul><div class="language- line-numbers-mode" data-ext="" data-title=""><button class="copy" title="复制代码" data-copied="已复制"></button><pre class="shiki shiki-themes vitesse-light vitesse-dark vp-code"><code><span class="line"><span>server {</span></span>
<span class="line"><span>    listen 443 ssl;</span></span>
<span class="line"><span>    server_name jcblog.com;</span></span>
<span class="line"><span>    root /home/static_blog/static_blog/;</span></span>
<span class="line"><span>    </span></span>
<span class="line"><span>    ssl on;</span></span>
<span class="line"><span>    ssl_certificate /etc/nginx/ssl/3878801_www.jcblog.top.pem;</span></span>
<span class="line"><span>    ssl_certificate_key /etc/nginx/ssl/3878801_www.jcblog.top.key;</span></span>
<span class="line"><span>    ssl_session_cache shared:SSL:1m;</span></span>
<span class="line"><span>    ssl_session_timeout  10m;</span></span>
<span class="line"><span>    ssl_ciphers HIGH:!aNULL:!MD5;</span></span>
<span class="line"><span>    ssl_prefer_server_ciphers on;</span></span>
<span class="line"><span>    # 指定密码为openssl支持的格式</span></span>
<span class="line"><span>    ssl_protocols  SSLv2 SSLv3 TLSv1.2;</span></span>
<span class="line"><span>    location / {</span></span>
<span class="line"><span>        try_files $uri $uri/ /index.html;</span></span>
<span class="line"><span>        # index index.html index.htm;</span></span>
<span class="line"><span>    }</span></span>
<span class="line"><span>}</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div>`,14)]))}const d=n(l,[["render",p],["__file","index.html.vue"]]),r=JSON.parse('{"path":"/%E8%AF%AD%E8%A8%80/emiohftn/","title":"Nginx","lang":"zh-CN","frontmatter":{"title":"Nginx","createTime":"2020/05/07","tags":["Nginx"],"categories":["服务器","网络"],"permalink":"/语言/emiohftn/","description":"安装 brew brew install nginx rpm rpm -ivh nginx-1.10.3-1.el7.ngx.x86_64.rpm yum 依赖 yum -y install gcc pcre-devel zlib-devel openssl openssl-devel 下载 yum install -y nginx 命令 启动 ngi...","head":[["meta",{"property":"og:url","content":"https://orthogonalandparallel.github.io/%E8%AF%AD%E8%A8%80/emiohftn/"}],["meta",{"property":"og:site_name","content":"万里任禅游"}],["meta",{"property":"og:title","content":"Nginx"}],["meta",{"property":"og:description","content":"安装 brew brew install nginx rpm rpm -ivh nginx-1.10.3-1.el7.ngx.x86_64.rpm yum 依赖 yum -y install gcc pcre-devel zlib-devel openssl openssl-devel 下载 yum install -y nginx 命令 启动 ngi..."}],["meta",{"property":"og:type","content":"article"}],["meta",{"property":"og:locale","content":"zh-CN"}],["meta",{"property":"og:updated_time","content":"2025-06-12T08:13:49.000Z"}],["meta",{"property":"article:tag","content":"Nginx"}],["meta",{"property":"article:modified_time","content":"2025-06-12T08:13:49.000Z"}],["script",{"type":"application/ld+json"},"{\\"@context\\":\\"https://schema.org\\",\\"@type\\":\\"Article\\",\\"headline\\":\\"Nginx\\",\\"image\\":[\\"\\"],\\"dateModified\\":\\"2025-06-12T08:13:49.000Z\\",\\"author\\":[]}"]]},"headers":[],"readingTime":{"minutes":1.77,"words":530},"git":{"updatedTime":1749716029000,"contributors":[{"name":"靳琛","email":"jinchenj@yonyou.com","commits":1,"avatar":"https://avatars.githubusercontent.com/靳琛?v=4","url":"https://github.com/靳琛"}]},"autoDesc":true,"filePathRelative":"笔记/语言/后端/nginx.md","categoryList":[{"id":"7051dc","sort":10000,"name":"笔记"},{"id":"d592ad","sort":10015,"name":"语言"},{"id":"83a577","sort":10018,"name":"后端"}],"bulletin":false}');export{d as comp,r as data};
