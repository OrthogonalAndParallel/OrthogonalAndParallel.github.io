import{_ as e,c as a,a as n,o as i}from"./app-DUomSOUZ.js";const l={};function d(t,s){return i(),a("div",null,s[0]||(s[0]=[n(`<h2 id="安装" tabindex="-1"><a class="header-anchor" href="#安装"><span>安装</span></a></h2><h3 id="win" tabindex="-1"><a class="header-anchor" href="#win"><span>Win</span></a></h3><ul><li>解压Mysql.zip后，添加bin目录的环境变量</li><li>配置my.ini文件中的</li></ul><div class="language- line-numbers-mode" data-ext="" data-title=""><button class="copy" title="复制代码" data-copied="已复制"></button><pre class="shiki shiki-themes vitesse-light vitesse-dark vp-code"><code><span class="line"><span>basedir =D:\\mysql-5.6.24-winx64</span></span>
<span class="line"><span>datadir = D:\\mysql-5.6.24-winx64\\data</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div></div></div><ul><li>cmd窗口进入运行bin目录运行mysqld -install添加到服务，mysqld -remove移出服务</li><li>cmd窗口启动服务　　net start mysql</li><li>cmd窗口登陆</li></ul><div class="language- line-numbers-mode" data-ext="" data-title=""><button class="copy" title="复制代码" data-copied="已复制"></button><pre class="shiki shiki-themes vitesse-light vitesse-dark vp-code"><code><span class="line"><span>mysql -u root -p（root用户登录）</span></span>
<span class="line"><span>更改用户名　　use mysql</span></span>
<span class="line"><span>update user set user=&quot;newUserName&quot; where user=&quot;oldUserName&quot;</span></span>
<span class="line"><span>flush privileges</span></span>
<span class="line"><span>exit</span></span>
<span class="line"><span>修改密码　　　</span></span>
<span class="line"><span>mysqladmin -u &quot;username&quot; -p password &quot;newPassword&quot;</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ul><li>环境变量配置</li></ul><div class="language- line-numbers-mode" data-ext="" data-title=""><button class="copy" title="复制代码" data-copied="已复制"></button><pre class="shiki shiki-themes vitesse-light vitesse-dark vp-code"><code><span class="line"><span>MYSQL_HOME</span></span>
<span class="line"><span>Path</span></span>
<span class="line"><span>Net start mysql57</span></span>
<span class="line"><span>Net stop mysql57</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="mac" tabindex="-1"><a class="header-anchor" href="#mac"><span>Mac</span></a></h3><ul><li>启动MySQL, 打开终端，给MySQL命令目录设置别名，不需要每次切换目录</li></ul><div class="language- line-numbers-mode" data-ext="" data-title=""><button class="copy" title="复制代码" data-copied="已复制"></button><pre class="shiki shiki-themes vitesse-light vitesse-dark vp-code"><code><span class="line"><span>alias mysql=/usr/local/mysql/bin/mysql</span></span>
<span class="line"><span>alias mysqladmin=/usr/local/mysql/bin/mysqladmin</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div></div></div><ul><li>登录MySQL <code>mysql -u root -p</code></li></ul><h3 id="linux" tabindex="-1"><a class="header-anchor" href="#linux"><span>Linux</span></a></h3><ul><li>下载mysql <code>wget https://dev.mysql.com//Downloads/MySQL-5.7/mysql-5.7.11-linux-glibc2.5-x86_64.tar.gz</code></li><li>解压 <code>tar zxvf mysql-5.7.11-linux-glibc2.5-x86_64.tar.gz</code></li><li>重命名 <code>mv mysql-5.7.11-linux-glibc2.5-x86_64.tar.gz mysql</code></li><li>设置配置文件</li></ul><div class="language- line-numbers-mode" data-ext="" data-title=""><button class="copy" title="复制代码" data-copied="已复制"></button><pre class="shiki shiki-themes vitesse-light vitesse-dark vp-code"><code><span class="line"><span>cd /usr/local/mysql/support-files/</span></span>
<span class="line"><span>cp my-default.cnf /etc/my.cnf</span></span>
<span class="line"><span>vi /etc/my.cnf</span></span>
<span class="line"><span>character-set-client-handshake = FALSE 添加在[mysqld]下方即可</span></span>
<span class="line"><span>character-set-server = utf8mb4</span></span>
<span class="line"><span>collation-server = utf8mb4_unicode_ci</span></span>
<span class="line"><span>[client]</span></span>
<span class="line"><span>default-character-set=utf8mb4</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ul><li>开机启动</li></ul><div class="language- line-numbers-mode" data-ext="" data-title=""><button class="copy" title="复制代码" data-copied="已复制"></button><pre class="shiki shiki-themes vitesse-light vitesse-dark vp-code"><code><span class="line"><span>cp /usr/local/mysql/support-files/mysql.server /etc/init.d/mysql</span></span>
<span class="line"><span>vi /etc/init.d/mysql</span></span>
<span class="line"><span>basedir=/usr/local/mysql</span></span>
<span class="line"><span>datadir=/usr/local/mysql/data</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ul><li>建立mysql的组 <code>groupadd mysql</code></li><li>建立mysql用户 <code>useradd -r -g mysql mysql</code></li><li>设置密码 <code>passwd mysql</code></li><li>更改拥有者 \`chown -R mysql:mysql /usr/local/mysql/</li><li>初始化数据库 <code>./mysqld --initialize --user=mysql --basedir=/usr/local/mysql --datadir=/usr/local/mysql/data</code></li><li>数据库加密 <code>./mysql_ssl_rsa_setup --datadir=/usr/local/mysql/data</code></li><li>启动 <code>./mysql -uroot -p</code></li><li>修改密码 <code>set password=password(&#39;/* 新密码 */&#39;)</code></li><li>授权远程访问 <code>grant all privileges on *.* to root@&#39;%&#39; identified by &#39;/* 新密码 */&#39;</code></li></ul><h2 id="语法" tabindex="-1"><a class="header-anchor" href="#语法"><span>语法</span></a></h2><h3 id="用户" tabindex="-1"><a class="header-anchor" href="#用户"><span>用户</span></a></h3><div class="language- line-numbers-mode" data-ext="" data-title=""><button class="copy" title="复制代码" data-copied="已复制"></button><pre class="shiki shiki-themes vitesse-light vitesse-dark vp-code"><code><span class="line"><span>SELECT USER, HOST FROM MYSQL.USER;</span></span>
<span class="line"><span>CREATE USER &#39;O2O&#39;@&#39;localhost&#39; IDENTIFIED BY &#39;O2O&#39;;</span></span>
<span class="line"><span>DROP USER O2O;</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="实例" tabindex="-1"><a class="header-anchor" href="#实例"><span>实例</span></a></h3><div class="language- line-numbers-mode" data-ext="" data-title=""><button class="copy" title="复制代码" data-copied="已复制"></button><pre class="shiki shiki-themes vitesse-light vitesse-dark vp-code"><code><span class="line"><span>create database 2o;</span></span>
<span class="line"><span>show databases;</span></span>
<span class="line"><span>Drop database if exists o2o;</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="导入导出" tabindex="-1"><a class="header-anchor" href="#导入导出"><span>导入导出</span></a></h3><div class="language- line-numbers-mode" data-ext="" data-title=""><button class="copy" title="复制代码" data-copied="已复制"></button><pre class="shiki shiki-themes vitesse-light vitesse-dark vp-code"><code><span class="line"><span>软连接 </span></span>
<span class="line"><span>ln -fs /usr/local/mysql/bin/mysqldump /usr/bin</span></span>
<span class="line"><span>ln -fs /usr/local/mysql/bin/mysql /usr/bin</span></span>
<span class="line"><span>导出</span></span>
<span class="line"><span>导出表和数据 -- mysqldump -h localhost -u root -p cloudpivots &gt; /data/cloudpivots.sql</span></span>
<span class="line"><span>导出表结构 -- mysqldump -h localhost -u root -p -d cloudpivots &gt; /data/cloudpivots.sql</span></span>
<span class="line"><span>导入 -- mysql -u root -p cloudpivots &lt;cloudpivots.sql</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="权限" tabindex="-1"><a class="header-anchor" href="#权限"><span>权限</span></a></h3><div class="language- line-numbers-mode" data-ext="" data-title=""><button class="copy" title="复制代码" data-copied="已复制"></button><pre class="shiki shiki-themes vitesse-light vitesse-dark vp-code"><code><span class="line"><span>grant all privileges on *.* to &#39;O2O&#39;@&#39;localhost&#39;;</span></span>
<span class="line"><span>flush privileges;</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="表空间" tabindex="-1"><a class="header-anchor" href="#表空间"><span>表空间</span></a></h3><div class="language- line-numbers-mode" data-ext="" data-title=""><button class="copy" title="复制代码" data-copied="已复制"></button><pre class="shiki shiki-themes vitesse-light vitesse-dark vp-code"><code><span class="line"><span>CREATE TABLESPACE TBSPACE_O2O</span></span>
<span class="line"><span>ADD DATAFILE &#39;TBSPACE_O2O.ibd&#39;</span></span>
<span class="line"><span>USE LOGFILE GROUP LOGGROUP_O2O</span></span>
<span class="line"><span>EXTENT_SIZE =100M</span></span>
<span class="line"><span>INITIAL_SIZE = 3072M</span></span>
<span class="line"><span>AUTOEXTEND_SIZE = 100M;</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="表" tabindex="-1"><a class="header-anchor" href="#表"><span>表</span></a></h3><div class="language- line-numbers-mode" data-ext="" data-title=""><button class="copy" title="复制代码" data-copied="已复制"></button><pre class="shiki shiki-themes vitesse-light vitesse-dark vp-code"><code><span class="line"><span>use O2O;</span></span>
<span class="line"><span>CREATE TABLE \`TB_AREA\` (</span></span>
<span class="line"><span>  \`AREA_ID\` INT(2) NOT NULL AUTO_INCREMENT,</span></span>
<span class="line"><span>  \`AREA_NAME\` VARCHAR(200) NOT NULL,</span></span>
<span class="line"><span>  \`PRIORITY\` INT(2) NOT NULL,</span></span>
<span class="line"><span>  \`CREATE_TIME\` DATETIME DEFAULT NULL,</span></span>
<span class="line"><span>  \`LAST_EDIT_TIME\` DATETIME DEFAULT NULL,</span></span>
<span class="line"><span>  PRIMARY KEY(\`AREA_ID\`),</span></span>
<span class="line"><span>  UNIQUE KEY \`UK_AREA\`(\`AREA_NAME\`)</span></span>
<span class="line"><span>) ENGINE=InnoDB AUTO_INCREMENT=1 DEFAULT CHARSET=utf8; </span></span>
<span class="line"><span>select * from TB_AREA;</span></span>
<span class="line"><span>InnoDB -- 多线程,基于行</span></span>
<span class="line"><span>MYISAM -- 单线程, 基于表</span></span>
<span class="line"><span>CREATE TABLE \`tb_shop_category\` (</span></span>
<span class="line"><span>  \`shop_category_id\` int(11) NOT NULL AUTO_INCREMENT,</span></span>
<span class="line"><span>  \`shop_category_name\` varchar(1000) NOT NULL DEFAULT &#39;&#39;,</span></span>
<span class="line"><span>  \`shop_category_desc\` varchar(1000) DEFAULT &#39;&#39;,</span></span>
<span class="line"><span>  \`shop_category_img\` varchar(2000) DEFAULT NULL,</span></span>
<span class="line"><span>  \`priority\` int(2) NOT NULL DEFAULT &#39;0&#39;,</span></span>
<span class="line"><span>  \`create_time\` datetime DEFAULT NULL,</span></span>
<span class="line"><span>  \`last_edit_time\` datetime DEFAULT NULL,</span></span>
<span class="line"><span>  \`parent_id\` int(11) DEFAULT NULL,</span></span>
<span class="line"><span>  PRIMARY KEY (\`shop_category_id\`),</span></span>
<span class="line"><span>  CONSTRAINT \`fk_shop_category_self\` FOREIGN KEY (\`parent_id\`) REFERENCES \`tb_shop_category\`(\`shop_category_id\`)</span></span>
<span class="line"><span>) ENGINE=InnoDB AUTO_INCREMENT=1 DEFAULT CHARSET=utf8;</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="索引" tabindex="-1"><a class="header-anchor" href="#索引"><span>索引</span></a></h3><div class="language- line-numbers-mode" data-ext="" data-title=""><button class="copy" title="复制代码" data-copied="已复制"></button><pre class="shiki shiki-themes vitesse-light vitesse-dark vp-code"><code><span class="line"><span>-- 分析命中</span></span>
<span class="line"><span>EXPLAIN SELECT * FROM table WHERE a=1 AND b=2;</span></span>
<span class="line"><span>-- 更新索引统计信息  </span></span>
<span class="line"><span>ANALYZE TABLE table_name;</span></span>
<span class="line"><span>-- 查询索引 </span></span>
<span class="line"><span>SHOW INDEX FROM table_name;</span></span>
<span class="line"><span>-- 创建索引</span></span>
<span class="line"><span>ALTER TABLE table_name ADD INDEX idx_ab(a,b);</span></span>
<span class="line"><span>-- 忽略索引</span></span>
<span class="line"><span>SELECT * FROM table ignore index (idx_a) WHERE a=1 AND b=2;</span></span>
<span class="line"><span>-- 强制索引</span></span>
<span class="line"><span>SELECT * FROM table force index (idx_a) WHERE a=1 AND b=2;</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ul><li>将选择性高的列放在前面</li><li>查看 Cardinality（基数越大选择性越高），Cardinality的值小，可能不适合建立索引</li><li>where &gt; join &gt;</li></ul><h3 id="函数" tabindex="-1"><a class="header-anchor" href="#函数"><span>函数</span></a></h3><div class="language- line-numbers-mode" data-ext="" data-title=""><button class="copy" title="复制代码" data-copied="已复制"></button><pre class="shiki shiki-themes vitesse-light vitesse-dark vp-code"><code><span class="line"><span>CREATE DEFINER=\`root\`@\`%\` FUNCTION \`GET_ALL_COMPANY_NODE\`() RETURNS varchar(1000) CHARSET utf8</span></span>
<span class="line"><span>BEGIN</span></span>
<span class="line"><span>DECLARE V_RESULT VARCHAR(1000); -- 返回结果</span></span>
<span class="line"><span>RETURN V_RESULT;</span></span>
<span class="line"><span>END;</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="存储过程" tabindex="-1"><a class="header-anchor" href="#存储过程"><span>存储过程</span></a></h3><div class="language- line-numbers-mode" data-ext="" data-title=""><button class="copy" title="复制代码" data-copied="已复制"></button><pre class="shiki shiki-themes vitesse-light vitesse-dark vp-code"><code><span class="line"><span>创建</span></span>
<span class="line"><span>CREATE DEFINER=\`root\`@\`%\` PROCEDURE \`GEN_PERSION_MANAGE_STATISTICS\`()</span></span>
<span class="line"><span>BEGIN</span></span>
<span class="line"><span>DECLARE V_PARAM1 VARCHAR(32);</span></span>
<span class="line"><span>DECLARE V_PARAM2 INT;</span></span>
<span class="line"><span>END;</span></span>
<span class="line"><span>执行</span></span>
<span class="line"><span>CALL GEN_PERSION_MANAGE_STATISTICS();</span></span>
<span class="line"><span>调试</span></span>
<span class="line"><span>SET  @num = 0;</span></span>
<span class="line"><span>CALL GEN_PERSION_MANAGE_STATISTICS_6();</span></span>
<span class="line"><span>SELECT @num;</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="内置函数" tabindex="-1"><a class="header-anchor" href="#内置函数"><span>内置函数</span></a></h3><pre><code>* 当前日期 -- CURDATE()
* 当前时间 -- SYSDATE()
* 当前年份 -- YEAR(CURDATE())
* 当前月份 -- MONTH(CURDATE())
* 字符串转数字 -- CONVERT(str,SIGNED)  convert(1342.45365, decimal(12,2))，ROUND(100,2)
* JSON转字符串 -- JSON_UNQUOTE(JSON_EXTRACT(username -&gt; &#39;$[0]&#39;, &#39;$.id&#39; ))
* 字符串转JSON --  CONCAT(&#39;[{&quot;id&quot;:&quot;&#39;, company, &#39;&quot;,&quot;type&quot;:1}]&#39;)
* 替换函数 --  REPLACE(&#39;c8043fe5-0d16-11ea-bcc8-0050568a759b&#39;, &#39;-&#39;, &#39;&#39;);
* 字符串转时间 --  STR_TO_DATE(&#39;2019-01-20 16:01:45&#39;, &#39;%Y-%m-%d %H:%i:%s&#39;);
* 时间转字符串 -- date_format(birthday, &#39;%Y-%m-%d %H:%i:%s&#39;)
* 分组拼接 -- group_concat(id)
</code></pre><h3 id="定时" tabindex="-1"><a class="header-anchor" href="#定时"><span>定时</span></a></h3><div class="language- line-numbers-mode" data-ext="" data-title=""><button class="copy" title="复制代码" data-copied="已复制"></button><pre class="shiki shiki-themes vitesse-light vitesse-dark vp-code"><code><span class="line"><span>创建定时</span></span>
<span class="line"><span>CREATE EVENT \`cloudpivot\`.\`EVENT_GPMS\`</span></span>
<span class="line"><span>ON SCHEDULE</span></span>
<span class="line"><span>EVERY &#39;1&#39; MONTH STARTS &#39;2019-12-01 00:00:00&#39;</span></span>
<span class="line"><span>DO call GEN_PERSION_MANAGE_STATISTICS();</span></span>
<span class="line"><span>查看定时 -- show variables like &#39;%sche%&#39;;</span></span>
<span class="line"><span>开启定时 -- set global event_scheduler =1;</span></span>
<span class="line"><span>开启定时 -- alter event EVENT_DPAS on completion preserve enable;</span></span>
<span class="line"><span>关闭定时 -- alter event EVENT_GPMS on completion preserve disable;</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="游标" tabindex="-1"><a class="header-anchor" href="#游标"><span>游标</span></a></h3><div class="language- line-numbers-mode" data-ext="" data-title=""><button class="copy" title="复制代码" data-copied="已复制"></button><pre class="shiki shiki-themes vitesse-light vitesse-dark vp-code"><code><span class="line"><span>DECLARE S int DEFAULT 0; </span></span>
<span class="line"><span>DECLARE V_COMPANY_ID VARCHAR(32); </span></span>
<span class="line"><span>DECLARE V_COMPANY_IDS CURSOR FOR SELECT T1.ID FROM h_org_department T1 WHERE find_in_set(id, GET_ALL_COMPANY_NODE()); -- 查询所有公司ID</span></span>
<span class="line"><span>DECLARE CONTINUE HANDLER FOR NOT FOUND SET S=1;</span></span>
<span class="line"><span>OPEN V_COMPANY_IDS;</span></span>
<span class="line"><span>FETCH V_COMPANY_IDS INTO V_COMPANY_ID;</span></span>
<span class="line"><span>WHILE S&lt;&gt;1 DO</span></span>
<span class="line"><span>SET V_RESULT = CONCAT(V_RESULT, &quot;,&quot;, V_COMPANY_ID);</span></span>
<span class="line"><span>FETCH V_COMPANY_IDS INTO V_COMPANY_ID;</span></span>
<span class="line"><span>END WHILE;</span></span>
<span class="line"><span>CLOSE V_COMPANY_IDS;</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="服务" tabindex="-1"><a class="header-anchor" href="#服务"><span>服务</span></a></h3><pre><code>* 登录 \`mysql -u O2O -p Password\`
* 启动 \`service mysqld start\`
* 重启 \`service mysqld restart\`
* 停止 \`service mysqld stop\`
</code></pre><h3 id="线程" tabindex="-1"><a class="header-anchor" href="#线程"><span>线程</span></a></h3><pre><code>* 查找线程 \`select * from information_schema.innodb_trx\`
* 杀死线程 \`kill 78879\`
</code></pre><h2 id="常用" tabindex="-1"><a class="header-anchor" href="#常用"><span>常用</span></a></h2><h3 id="查询所有字段名" tabindex="-1"><a class="header-anchor" href="#查询所有字段名"><span>查询所有字段名</span></a></h3><div class="language- line-numbers-mode" data-ext="" data-title=""><button class="copy" title="复制代码" data-copied="已复制"></button><pre class="shiki shiki-themes vitesse-light vitesse-dark vp-code"><code><span class="line"><span>纵表</span></span>
<span class="line"><span>select concat(&#39;\`&#39;, column_name, &#39;\`&#39;, &#39;,&#39;) </span></span>
<span class="line"><span>from information_schema.columns </span></span>
<span class="line"><span>where table_name=&#39;ic8x6_EmployeeRosters&#39; and table_schema=&#39;cloudpivot&#39;;</span></span>
<span class="line"><span>横表</span></span>
<span class="line"><span>select group_concat(t1.\`NAME\`)</span></span>
<span class="line"><span>from (</span></span>
<span class="line"><span>select concat(&#39;\`&#39;, column_name, &#39;\`&#39;) AS \`NAME\`, &#39;1&#39; AS \`TAG\` </span></span>
<span class="line"><span>from information_schema.columns </span></span>
<span class="line"><span>where table_name=&#39;ij3ak_employeerosters&#39; and table_schema=&#39;cloudpivots&#39;</span></span>
<span class="line"><span>) t1 group by t1.TAG;</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="查询系统当前时间" tabindex="-1"><a class="header-anchor" href="#查询系统当前时间"><span>查询系统当前时间</span></a></h3><div class="language- line-numbers-mode" data-ext="" data-title=""><button class="copy" title="复制代码" data-copied="已复制"></button><pre class="shiki shiki-themes vitesse-light vitesse-dark vp-code"><code><span class="line"><span>select current_date;</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><h3 id="事件" tabindex="-1"><a class="header-anchor" href="#事件"><span>事件</span></a></h3><div class="language- line-numbers-mode" data-ext="" data-title=""><button class="copy" title="复制代码" data-copied="已复制"></button><pre class="shiki shiki-themes vitesse-light vitesse-dark vp-code"><code><span class="line"><span>创建</span></span>
<span class="line"><span>CREATE EVENT e_Employee_Rosters_Copy</span></span>
<span class="line"><span>ON SCHEDULE EVERY 1 SECOND </span></span>
<span class="line"><span>DO INSERT cloudpivot.ic8x6_employeeRostersCopy (COPY_TIME, address, age, archivesSite, archivesType, birthday, createdDeptId, createdTime, creater, employeeId, employeeName, employeeStatus, employmentNature, gender, generalRecruitment, height, highestDegree, highestDegreeEdate, highestDegreeMajor, highestDegreeSdate, highestDegreeUniversity, id, iDaddress, iDcard, iDendDate, iDstartDate, industryPracticeDate, isBlacklist, isGeneralRecruitments, isOutsource,isOverseasEducation,isOverseasEducations,isSecond, jobDate, maritalStatus, mobile, modifiedTime, modifier, name, nation, nativePlace, owner, ownerDeptId, ownerDeptQueryCode, politicalOutlook,professionalLabel, registeredResidenceType, secondaryDegree, secondaryDegreeEdate, secondaryDegreeMajor, secondaryDegreeSdate, secondaryDegreeUniversity, sequenceNo, sequenceStatus, userid, workflowInstanceId)</span></span>
<span class="line"><span>select current_date, address, age, archivesSite, archivesType, birthday, createdDeptId, createdTime, creater, employeeId, employeeName, employeeStatus, employmentNature, gender, generalRecruitment, height, highestDegree, highestDegreeEdate, highestDegreeMajor, highestDegreeSdate, highestDegreeUniversity, id, iDaddress, iDcard, iDendDate, iDstartDate, industryPracticeDate, isBlacklist, isGeneralRecruitments, isOutsource, isOverseasEducation, isOverseasEducations, isSecond, jobDate, maritalStatus, mobile, modifiedTime, modifier, name, nation, nativePlace, owner, ownerDeptId, ownerDeptQueryCode, politicalOutlook, professionalLabel, registeredResidenceType, secondaryDegree, secondaryDegreeEdate, secondaryDegreeMajor, secondaryDegreeSdate, secondaryDegreeUniversity, sequenceNo, sequenceStatus, userid, workflowInstanceId from ic8x6_EmployeeRosters er;</span></span>
<span class="line"><span>查询事件开启状态</span></span>
<span class="line"><span>SHOW VARIABLES LIKE &#39;event_scheduler&#39;;</span></span>
<span class="line"><span>开启事件</span></span>
<span class="line"><span>SET GLOBAL event_scheduler = ON;</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="获取第一行数据" tabindex="-1"><a class="header-anchor" href="#获取第一行数据"><span>获取第一行数据</span></a></h3><div class="language- line-numbers-mode" data-ext="" data-title=""><button class="copy" title="复制代码" data-copied="已复制"></button><pre class="shiki shiki-themes vitesse-light vitesse-dark vp-code"><code><span class="line"><span>select scheme_code from scheme_fliter order by scheme_code desc limit 1;</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><h3 id="查询所有表" tabindex="-1"><a class="header-anchor" href="#查询所有表"><span>查询所有表</span></a></h3><div class="language- line-numbers-mode" data-ext="" data-title=""><button class="copy" title="复制代码" data-copied="已复制"></button><pre class="shiki shiki-themes vitesse-light vitesse-dark vp-code"><code><span class="line"><span>select table_name</span></span>
<span class="line"><span>from information_schema.tables </span></span>
<span class="line"><span>where table_schema=&#39;cloudpivot&#39; and table_name like &#39;%POST%&#39;</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="查询上个月时间区间内的数据" tabindex="-1"><a class="header-anchor" href="#查询上个月时间区间内的数据"><span>查询上个月时间区间内的数据</span></a></h3><div class="language- line-numbers-mode" data-ext="" data-title=""><button class="copy" title="复制代码" data-copied="已复制"></button><pre class="shiki shiki-themes vitesse-light vitesse-dark vp-code"><code><span class="line"><span>BETWEEN DATE_ADD(DATE_SUB(curdate(), INTERVAL 1 MONTH), interval -day(curdate())+1 day) AND date_add(DATE_ADD(DATE_SUB(curdate(), INTERVAL 1 MONTH), interval -day(curdate())+1 day),interval 1 month)</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><h3 id="清除数据表中的回车和空格" tabindex="-1"><a class="header-anchor" href="#清除数据表中的回车和空格"><span>清除数据表中的回车和空格</span></a></h3><div class="language- line-numbers-mode" data-ext="" data-title=""><button class="copy" title="复制代码" data-copied="已复制"></button><pre class="shiki shiki-themes vitesse-light vitesse-dark vp-code"><code><span class="line"><span>update ij3ak_salaryfiles</span></span>
<span class="line"><span>set type =  REPLACE(REPLACE(REPLACE(REPLACE(type,CHAR(13),&#39;&#39;),CHAR(10),&#39;&#39;),CHAR(9),&#39;&#39;),&#39; &#39;,&#39;&#39;)</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="保留小数位数" tabindex="-1"><a class="header-anchor" href="#保留小数位数"><span>保留小数位数</span></a></h3><div class="language- line-numbers-mode" data-ext="" data-title=""><button class="copy" title="复制代码" data-copied="已复制"></button><pre class="shiki shiki-themes vitesse-light vitesse-dark vp-code"><code><span class="line"><span>decode(salary,0,&#39;0.00&#39;,(to_char(round(salary,2),&#39;fm99999999999999.00&#39;)))</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><h3 id="时间间隔" tabindex="-1"><a class="header-anchor" href="#时间间隔"><span>时间间隔</span></a></h3><div class="language- line-numbers-mode" data-ext="" data-title=""><button class="copy" title="复制代码" data-copied="已复制"></button><pre class="shiki shiki-themes vitesse-light vitesse-dark vp-code"><code><span class="line"><span>--计算两个时间差相差多少秒</span></span>
<span class="line"><span>select ceil((sysdate-t.transdate)* 24 * 60 * 60),t.transdate,sysdate from esc_trans_log t</span></span>
<span class="line"><span>--计算两个时间差相差多少分</span></span>
<span class="line"><span>select ceil((sysdate-t.transdate)* 24 * 60),t.transdate,sysdate from esc_trans_log t</span></span>
<span class="line"><span>--计算两个时间差相差多少小时</span></span>
<span class="line"><span>select ceil((sysdate-t.transdate)* 24),t.transdate,sysdate from esc_trans_log t</span></span>
<span class="line"><span>--计算两个时间差相差多少天</span></span>
<span class="line"><span>select ceil(sysdate-t.transdate),t.transdate,sysdate from esc_trans_log t</span></span>
<span class="line"><span>--计算两个时间差相差多少月</span></span>
<span class="line"><span>select trunc(months_between(sysdate,t.transdate)) from esc_trans_log t</span></span>
<span class="line"><span>--计算两个时间差相差多少年</span></span>
<span class="line"><span>select trunc(months_between(sysdate,t.transdate)/12) from esc_trans_log t</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div>`,67)]))}const c=e(l,[["render",d],["__file","index.html.vue"]]),r=JSON.parse('{"path":"/%E8%AF%AD%E8%A8%80/MySQL/","title":"MySQL","lang":"zh-CN","frontmatter":{"title":"MySQL","createTime":"2020/05/06","tags":["Mysql"],"categories":["数据库"],"permalink":"/语言/MySQL/","description":"安装 Win 解压Mysql.zip后，添加bin目录的环境变量 配置my.ini文件中的 cmd窗口进入运行bin目录运行mysqld -install添加到服务，mysqld -remove移出服务 cmd窗口启动服务 net start mysql cmd窗口登陆 环境变量配置 Mac 启动MySQL, 打开终端，给MySQL命令目录设置别名，不...","head":[["meta",{"property":"og:url","content":"https://orthogonalandparallel.github.io/%E8%AF%AD%E8%A8%80/MySQL/"}],["meta",{"property":"og:site_name","content":"万里任禅游"}],["meta",{"property":"og:title","content":"MySQL"}],["meta",{"property":"og:description","content":"安装 Win 解压Mysql.zip后，添加bin目录的环境变量 配置my.ini文件中的 cmd窗口进入运行bin目录运行mysqld -install添加到服务，mysqld -remove移出服务 cmd窗口启动服务 net start mysql cmd窗口登陆 环境变量配置 Mac 启动MySQL, 打开终端，给MySQL命令目录设置别名，不..."}],["meta",{"property":"og:type","content":"article"}],["meta",{"property":"og:locale","content":"zh-CN"}],["meta",{"property":"og:updated_time","content":"2025-08-22T10:15:26.000Z"}],["meta",{"property":"article:tag","content":"Mysql"}],["meta",{"property":"article:modified_time","content":"2025-08-22T10:15:26.000Z"}],["script",{"type":"application/ld+json"},"{\\"@context\\":\\"https://schema.org\\",\\"@type\\":\\"Article\\",\\"headline\\":\\"MySQL\\",\\"image\\":[\\"\\"],\\"dateModified\\":\\"2025-08-22T10:15:26.000Z\\",\\"author\\":[]}"]]},"headers":[],"readingTime":{"minutes":5.05,"words":1514},"git":{"updatedTime":1755857726000,"contributors":[{"name":"靳琛","email":"jinchenj@yonyou.com","commits":3,"avatar":"https://avatars.githubusercontent.com/靳琛?v=4","url":"https://github.com/靳琛"}]},"autoDesc":true,"filePathRelative":"笔记/语言/数据库/mysql.md","categoryList":[{"id":"7051dc","sort":10000,"name":"笔记"},{"id":"d592ad","sort":10015,"name":"语言"},{"id":"7ca39d","sort":10017,"name":"数据库"}],"bulletin":false}');export{c as comp,r as data};
